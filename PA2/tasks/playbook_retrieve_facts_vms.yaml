---
- name: Retrieve VM information
  openstack.cloud.server_info:
    cloud: "CH-822922"
    server: "Team17*"
  register: result

- name: Update Inventory with private IP addresses
  lineinfile:
    path: Inventory
    line: "{{ item.addresses['CH-822922-net'][0].addr }}"
    state: present
    insertafter: '[CloudVMs]'
  loop: "{{ result.servers }}"
  when: item.addresses is defined and 'CH-822922-net' in item.addresses

...
